<!DOCTYPE html><html><head><title>Лекция 5.1 Введение в ZooKeeper.docx</title><link rel="shortcut icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0"><meta name="referrer" content="strict-origin-when-cross-origin"><style nonce="3fj-wPPhDFaQx2VvG59h_g">
html {
  overflow: auto;
}
body {
  margin: 0;
  overflow: hidden;
  word-wrap: break-word;
}
.app-container {
  height: 100%;
  /* Height of mobileweb header + 1 px vertical shadow. */
  margin-top: 57px;
  overflow: auto;
}
.doc {
  padding: 20px 12px 0 12px;
  position: relative;
}
.doc .doc-content {
  margin: auto;
  /* Override the inline style that is set on the .doc-content div, which is used to store layout
     data for roundtripping. */
  padding: 24px 0 !important;
  max-width: 770px !important;
}
</style><style>@import url(https://fonts.googleapis.com/css?family=Google+Sans);.docs-ml-noselect{-webkit-touch-callout:none;-webkit-user-drag:none;-webkit-user-select:none;user-select:none}.docs-ml-promotion{z-index:1002}.docs-ml-header{z-index:1}.docs-ml-icon{direction:ltr;display:inline-block;text-align:left;overflow:hidden;position:relative;vertical-align:middle}.docs-ml-img:before{content:url(//ssl.gstatic.com/docs/common/mobileweb_sprite1.png)}.docs-ml-img-container{height:156px;position:absolute;width:36px}.docs-ml-docs-logo-icon{left:0;top:-36px}.docs-ml-sheets-logo-icon{left:0;top:0}.docs-ml-slides-logo-icon{left:0;top:-96px}.docs-ml-arrow-back-icon{left:0;top:-132px}.docs-ml-edit-icon{left:0;top:-72px}@media screen and (-webkit-min-device-pixel-ratio:2){.docs-ml-img{content:url(//ssl.gstatic.com/docs/common/mobileweb_sprite1.png)}.docs-ml-img-container{height:156px;position:absolute;width:36px}.docs-ml-docs-logo-icon{left:0;top:-36px}.docs-ml-sheets-logo-icon{left:0;top:0}.docs-ml-slides-logo-icon{left:0;top:-96px}.docs-ml-arrow-back-icon{left:0;top:-132px}.docs-ml-edit-icon{left:0;top:-72px}}.docs-ml-header{background:#fafafa;border-bottom:1px solid #cbcbcb;box-shadow:0 1px 1px rgba(0,0,0,.1);box-sizing:border-box;font-family:Google Sans,Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;padding:4px 0;position:fixed;left:0;top:0;width:100%}.docs-ml-header-icon{height:24px;opacity:.6;width:24px}.docs-ml-header-icon-container{padding:12px}.docs-ml-header-item{display:inline-block;vertical-align:middle}.docs-ml-header-drive-link{padding-left:4px}body[dir=rtl] .docs-ml-arrow-back-dir{transform:scaleX(-1)}.docs-ml-header-document-title{box-sizing:border-box;line-height:24px;padding:0 12px;width:60%;width:calc(100% - 104px)}.docs-ml-header-document-title-text{font-size:20px;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.docs-ml-header-edit-button{float:right;padding-right:4px}.docs-ml-promotion{background:#fff;bottom:0;box-shadow:0 4px 12px rgba(0,0,0,.4);font-family:Arial,Helvetica,sans-serif;left:0;position:fixed;width:100%}.docs-ml-promotion-off-screen{transform:translateY(100%)}.docs-ml-promotion-shown{transform:translateY(0);transition:transform 333ms cubic-bezier(.4,0,.2,1)}.docs-ml-promotion-dismissed{transform:translateY(100%);box-shadow:none}.docs-ml-promotion-no-horizontal-scroll{overflow-x:hidden}.docs-ml-promotion-header{display:table;padding:24px 24px 0 24px}.docs-ml-promotion-app-icon-container{display:table-cell}.docs-ml-promotion-app-icon{height:36px;width:36px}@media (min-width:600px){.docs-ml-promotion-app-icon{transform:scale(1.33)}}.docs-ml-promotion-text{display:table-cell;padding-left:20px;vertical-align:top}.docs-ml-promotion-text-heading{color:rgba(0,0,0,.87);font-size:16px;font-weight:700;padding-bottom:7px}.docs-ml-promotion-text-body{color:rgba(0,0,0,.87);font-size:14px}.docs-ml-promotion-action-row{float:right;margin-top:6px;padding:8px 24px}.docs-ml-promotion-action-row-desktop{margin-top:6px}.docs-ml-promotion-action-container{display:inline-block;height:48px;margin:6px 4px;vertical-align:middle}.docs-ml-promotion-action-button{display:inline-block;font-size:14px;font-weight:500;padding:9px 12px;vertical-align:middle}.docs-ml-promotion-action-button-wrapper:focus{outline-color:#d6d6d6}.docs-ml-promotion-action-button.docs-ml-promotion-yes-button{background-color:#4285f4;border-radius:4px;color:#fafafa;border:1px solid transparent}.docs-ml-promotion-action-button.docs-ml-promotion-yes-button:active{background-color:#1967d2}.docs-ml-promotion-action-button.docs-ml-promotion-no-button{background-color:#fafafa;color:#5f6368;border-radius:4px;border:1px solid #dadce0}.docs-ml-promotion-action-button.docs-ml-promotion-no-button:active{background-color:#f5f5f5}.docs-ml-promotion.desktop{text-align:center}@media (orientation:portrait){.docs-ml-promotion.desktop{padding-top:56px;padding-bottom:80px}}@media (orientation:landscape){.docs-ml-promotion.desktop{padding-top:36px;padding-bottom:56px}}.docs-ml-promotion-heading-desktop{font-family:Google Sans;font-size:18px;font-weight:700;color:#202124;padding-top:18px;padding-bottom:10px;line-height:1.5;max-width:360px;margin:0 auto}@media (orientation:landscape){.docs-ml-promotion-heading-desktop{padding-top:0;max-width:none}}.docs-ml-promotion-text-body-desktop{font-size:14px;line-height:1.5;color:#5f6368;padding-bottom:10px}.docs-icon.docs-ml-promotion-desktop-icon{height:40px;width:40px;transform:scale(2.5);transform-origin:top}.docs-icon-ml-promotion-icon-container-desktop{height:100px;width:100px;margin-left:auto;margin-right:auto}@media (orientation:landscape){.docs-icon-ml-promotion-icon-container-desktop{display:inline-block;vertical-align:top}.docs-ml-promotion-description-desktop{display:inline-block;vertical-align:top;text-align:left;padding-left:39px;max-width:645px}}@media (orientation:landscape){.docs-ml-promotion-action-row-desktop{margin-left:-8px}}.docs-ml-promotion-action-row-desktop .docs-ml-promotion-action-container{margin:6px 8px;font-family:Google Sans}.docs-ml-promotion-action-row-desktop .docs-ml-promotion-action-button-wrapper:focus{outline:none}.docs-ml-promotion-action-button.docs-ml-promotion-yes-button.docs-ml-promotion-app-themed{background-image:none;border:1px solid transparent!important;border-radius:4px;box-shadow:none;box-sizing:border-box;font-family:Google Sans,Roboto,RobotoDraft,Helvetica,Arial,sans-serif;font-weight:500;font-size:14px;height:36px;letter-spacing:.25px;line-height:16px;padding:9px 24px 11px 24px;background:#1a73e8;color:#fff}.docs-ml-promotion-action-button.docs-ml-promotion-yes-button.docs-ml-promotion-app-themed:active{background-image:none;border:1px solid transparent!important;border-radius:4px;box-shadow:none;box-sizing:border-box;font-family:Google Sans,Roboto,RobotoDraft,Helvetica,Arial,sans-serif;font-weight:500;font-size:14px;height:36px;letter-spacing:.25px;line-height:16px;padding:9px 24px 11px 24px;background:#1a73e8;color:#fff}.docs-ml-promotion-action-button.docs-ml-promotion-no-button.docs-ml-promotion-app-themed{border:1px solid transparent!important;border-radius:4px;box-shadow:none;box-sizing:border-box;font-family:Google Sans,Roboto,RobotoDraft,Helvetica,Arial,sans-serif;font-weight:500;font-size:14px;height:36px;letter-spacing:.25px;line-height:16px;padding:9px 24px 11px 24px;background:#fff;border:1px solid #dadce0!important;color:#1a73e8}.docs-ml-promotion-action-button-wrapper:focus .docs-ml-promotion-action-button.docs-ml-promotion-yes-button.docs-ml-promotion-app-themed{background-image:none;border:1px solid transparent!important;border-radius:4px;box-shadow:none;box-sizing:border-box;font-family:Google Sans,Roboto,RobotoDraft,Helvetica,Arial,sans-serif;font-weight:500;font-size:14px;height:36px;letter-spacing:.25px;line-height:16px;padding:9px 24px 11px 24px;background:#1a73e8;color:#fff;background:#5094ed;box-shadow:0 1px 3px 1px rgba(66,133,244,.15)}.docs-ml-promotion-action-button-wrapper:focus .docs-ml-promotion-action-button.docs-ml-promotion-no-button.docs-ml-promotion-app-themed{border:1px solid transparent!important;border-radius:4px;box-shadow:none;box-sizing:border-box;font-family:Google Sans,Roboto,RobotoDraft,Helvetica,Arial,sans-serif;font-weight:500;font-size:14px;height:36px;letter-spacing:.25px;line-height:16px;padding:9px 24px 11px 24px;background:#e9f1fe;border:1px solid #c1d8fb!important}
/*# sourceMappingURL=mobileweb_css_ltr.css.map */</style><script nonce="gYHwHLpMVb3q0zs2lK62gQ">_docs_flag_initialData={"docs-daflia":true,"docs-cclt":56,"docs-mwid":false,"docs-smheo":false,"info_params":{"token":"AC4w5VhAmXHuEKTetjfdXRYjnX9_LgYJjg:1679924017972","includes_info_params":true},"docs-emwc":true,"docs-ecci":true,"ilcm":{"eui":"ADFN-cvJDz7LAIDrwtya2crovEP1o1lZis8Q18CFF5Fh_ZMjz8YPFjVfPWk2A2yNfbZw0KzzInBP","je":1,"sstu":1679924018265845,"si":"CPj97tKc_P0CFQigXQMdlA0K8Q","gsc":5,"ei":[5700019,5700032,5700057,5700103,5700114,5700333,5700611,5700884,5700893,5701034,5702785,5703182,5703307,5703757,5703839,5704572,5704621,5704883,5704905,5705100,5705793,5705891,5706209,5706270,5706523,5706786,5707047,5707075,5707204,5707326,5707361,5707711,5707820,5708365,5708570,5708886,5709085,5709476,5709673,5710587,5710692,5711391,5711495,5712189,5712635,5712909,5712913,5713064,5713195,5713554,5713592,5714310,5715270,5715350,5715728,5716198,5717567,5722046,5723473,5724217,5725855,5726697,5727259,5727701,5728751,5730227,5730287,5731837,5732343,5733770,5734842,5735136,5735254,5735672,5735808,5736126,5736886,5737256,5737802,5739780,5740188,5740343,5740816,5741716,5742158,5742484,5742654,5743146,5743789,5744010,5744290,5744310,5744350,5745660,5745680,5746140,5746650,5746726,5747128,5747218,5747943,5748171,5748993,5750112,5751159,5752371,5752463,5752676,5752716,5753683,5753944,5754027,5754291,5754369,5754389,5754409,5755411,5756276,5756677,5757324,5757344,5757623,5757643,5757665,5758029,5758676,5759209,5759280,5759564,5760169,5760289,5760370,5760452,5760472,5760927,5761273,5762403,5762731,5762771,5763599,5763619,5763700,5763832,5764328,5764468,5764606,5764806,5766374,5767667,5769154,5769481,5770387,5771104,5771124,5772296,5773004,5773916,5773996,5774056,5776034,5776337,5777217,5777651,5779002,5780514,5780652,5780984,5781111,5781337,5782407,5782966,5784556,5785962,5786640,13702623,48966243,49322999,49369466,49372309,49375203,49375882,49378770,49381143,49398670,49421373,49451720,49453026,49454177,49472112,49474048,49487439,49491746,49499310,49499577,49501785,49512334,49518631,49622712,49623242,49624041,49643557,49644064,49649095,49654174,49658623,49700945,49703972,49756767,49769426,49796898,49816066,49822850,49823073,49824184,49833571,49837749,49839660,49842884,49882933,49923428,49924635,49943108,49973360,49979328,50022355,50167020,50179451,50263353,50266111,50273477,50291121,50313283,50319353,50322344,50345203,50349229,50356816,50389219],"crc":0,"cvi":[]},"drive_url":"//drive.google.com/u/1?usp\u003ddocs_web","docs-liap":"/naLogImpressions","docs-sup":"/document/u/1"}; _docs_flag_cek='5q-8jUYSyL0W3KW9ux8-Gw\x3d\x3d'; if (window['DOCS_timing']) {DOCS_timing['ifdld']=new Date().getTime();}</script></head><body><script type="text/javascript" src="/static/document/client/js/945855526-mobileweb_binary_i18n__ru.js" nonce="gYHwHLpMVb3q0zs2lK62gQ"></script><script type="text/javascript" nonce="gYHwHLpMVb3q0zs2lK62gQ">if ((!this['DOCS_initDocsMobileWeb']) ||  false ) {if (window.navigator && window.navigator.sendBeacon) {window.navigator.sendBeacon('\/document\/u\/1\/jserror?jobset\x3dprod\x26error\x3dJS+binary+load+failure&context.functionName=DOCS_initDocsMobileWeb' + '&context.serviceWorkerControlled=' + !!(navigator.serviceWorker && navigator.serviceWorker.controller) + '\x26context.actionName\x3dMobileBasic');}(window.enterCoreJsErrorDialog ? enterCoreJsErrorDialog() : (window.location.href = 'https:\/\/support.google.com\/accounts\/answer\/32050'))}DOCS_initDocsMobileWeb( true ,  true , 'Лекция 5.1 Введение в ZooKeeper.docx', 'intent:\/\/docs.google.com\/document\/d\/1JBeUEgeNJZK2KaZjxQBgzno5Ilxlyylr\/edit#Intent;scheme\x3dhttps;package\x3dcom.google.android.apps.docs.editors.docs;S.browser_fallback_url\x3dmarket:\/\/details?id\x3dcom.google.android.apps.docs.editors.docs;end', 'googledocs:\/\/docs.google.com\/document\/u\/1\/d\/1JBeUEgeNJZK2KaZjxQBgzno5Ilxlyylr\/edit',  false );</script><div class="app-container"><div class="doc-container"><div class="doc"><style type="text/css"> @import url(https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLaQbUnfrlzX9YptpOnB30vidU2UdszIFv-JbwcPrcubs); .lst-kix_list_2-6 > li:before{content:"▪  "}.lst-kix_list_2-7 > li:before{content:"▪  "}ul.lst-kix_list_1-0{list-style-type:none}.lst-kix_list_2-4 > li:before{content:"▪  "}.lst-kix_list_2-5 > li:before{content:"▪  "}.lst-kix_list_2-8 > li:before{content:"▪  "}.lst-kix_list_3-0 > li:before{content:"●  "}.lst-kix_list_3-1 > li:before{content:"o  "}.lst-kix_list_3-2 > li:before{content:"▪  "}ul.lst-kix_list_3-7{list-style-type:none}ul.lst-kix_list_3-8{list-style-type:none}ul.lst-kix_list_1-3{list-style-type:none}ul.lst-kix_list_3-1{list-style-type:none}.lst-kix_list_3-5 > li:before{content:"▪  "}ul.lst-kix_list_1-4{list-style-type:none}ul.lst-kix_list_3-2{list-style-type:none}ul.lst-kix_list_1-1{list-style-type:none}.lst-kix_list_3-4 > li:before{content:"▪  "}ul.lst-kix_list_1-2{list-style-type:none}ul.lst-kix_list_3-0{list-style-type:none}ul.lst-kix_list_1-7{list-style-type:none}.lst-kix_list_3-3 > li:before{content:"▪  "}ul.lst-kix_list_3-5{list-style-type:none}ul.lst-kix_list_1-8{list-style-type:none}ul.lst-kix_list_3-6{list-style-type:none}ul.lst-kix_list_1-5{list-style-type:none}ul.lst-kix_list_3-3{list-style-type:none}ul.lst-kix_list_1-6{list-style-type:none}ul.lst-kix_list_3-4{list-style-type:none}.lst-kix_list_3-8 > li:before{content:"▪  "}.lst-kix_list_4-0 > li:before{content:"●  "}.lst-kix_list_4-1 > li:before{content:"o  "}.lst-kix_list_3-6 > li:before{content:"▪  "}.lst-kix_list_3-7 > li:before{content:"▪  "}.lst-kix_list_4-4 > li:before{content:"▪  "}.lst-kix_list_4-3 > li:before{content:"▪  "}.lst-kix_list_4-5 > li:before{content:"▪  "}.lst-kix_list_4-2 > li:before{content:"▪  "}.lst-kix_list_4-6 > li:before{content:"▪  "}.lst-kix_list_4-8 > li:before{content:"▪  "}.lst-kix_list_4-7 > li:before{content:"▪  "}ul.lst-kix_list_4-8{list-style-type:none}ul.lst-kix_list_4-6{list-style-type:none}ul.lst-kix_list_2-8{list-style-type:none}ul.lst-kix_list_4-7{list-style-type:none}ul.lst-kix_list_4-0{list-style-type:none}ul.lst-kix_list_2-2{list-style-type:none}ul.lst-kix_list_4-1{list-style-type:none}.lst-kix_list_1-0 > li:before{content:"●  "}ul.lst-kix_list_2-3{list-style-type:none}ul.lst-kix_list_2-0{list-style-type:none}ul.lst-kix_list_2-1{list-style-type:none}ul.lst-kix_list_4-4{list-style-type:none}ul.lst-kix_list_2-6{list-style-type:none}ul.lst-kix_list_4-5{list-style-type:none}.lst-kix_list_1-1 > li:before{content:"o  "}.lst-kix_list_1-2 > li:before{content:"▪  "}ul.lst-kix_list_2-7{list-style-type:none}ul.lst-kix_list_4-2{list-style-type:none}ul.lst-kix_list_2-4{list-style-type:none}ul.lst-kix_list_4-3{list-style-type:none}ul.lst-kix_list_2-5{list-style-type:none}.lst-kix_list_1-3 > li:before{content:"▪  "}.lst-kix_list_1-4 > li:before{content:"▪  "}.lst-kix_list_1-7 > li:before{content:"▪  "}.lst-kix_list_1-5 > li:before{content:"▪  "}.lst-kix_list_1-6 > li:before{content:"▪  "}.lst-kix_list_2-0 > li:before{content:"●  "}.lst-kix_list_2-1 > li:before{content:"o  "}.lst-kix_list_1-8 > li:before{content:"▪  "}.lst-kix_list_2-2 > li:before{content:"▪  "}.lst-kix_list_2-3 > li:before{content:"▪  "}</style><div class="doc-content" style="background-color:#ffffff;padding:56.7pt 42.5pt 56.7pt 85pt;max-width:467.8pt"><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Введення у </span><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">ZooKeeper</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Сервіс ZooKeeper</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">ZooKeeper – це високопродуктивна система координації з високою доступністю.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Чому Apache Zookeeper?</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Ось важливі причини популярності Zookeeper:</span></p><ul class="lst-kix_list_1-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Це дозволяє взаємне виключення та співпрацю між процесами сервера</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Це гарантує, що ваша програма працює послідовно.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Процес транзакції ніколи не завершується частково. Йому надається статус Успіх чи невдача. Розподілений стан може бути затриманий, але він ніколи не помиляється</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Незалежно від того, до якого сервера він підключається, клієнт зможе бачити те саме подання служби</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Допомагає вам кодувати дані відповідно до певного набору правил</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Це допомагає підтримувати стандартний ієрархічний простір імен, подібний до файлів і каталогів.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Комп&#39;ютери, які працюють як єдина система, яка може бути підключена локально чи географічно</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Дозволяє приєднатися / залишити вузол у кластері та статус вузла в режимі реального часу</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Ви можете підвищити продуктивність, розгорнувши більше машин</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Це дозволяє вам вибрати вузол як лідер для кращої координації.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">ZooKeeper швидко працює з робочими навантаженнями, де читання даних відбувається частіше, ніж запис</span></li></ul><p style="background-color:#ffffff;padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#2a2f35;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Архітектура ZooKeeper: Як це працює?</span></p><ul class="lst-kix_list_2-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Zookeeper слідує архітектурі клієнт-сервер</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Усі системи зберігають копію даних</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Лідери вибираються під час запуску</span></li></ul><p style="background-color:#ffffff;padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:center"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 700.33px; height: 254.13px;"><img alt="https://coderlessons.com/wp-content/uploads/images/gur/e1f75c1e5cde3491eab66680a32b4792.png" src="https://lh5.googleusercontent.com/UstBNGCiZh48jqAPP8IarTZgdMa0tM9eORpE0yX523DBmg-cYk6ytg-ayPeqNEe0AeZFt1YDI4fMDHzp19SzaRcbZXIwXuk72elA7cFMguGaUurKRWIDsEKC7rgXVEQ2poKhsRmAd3S_rUzbgzJdXg=s800" style="width: 700.33px; height: 254.13px; margin-left: -0.00px; margin-top: -0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p style="background-color:#ffffff;padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#2a2f35;font-weight:700">Сервер:</span><span style="color:#2a2f35;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"> сервер надсилає підтвердження під час підключення будь-якого клієнта. У разі відсутності відповіді від підключеного сервера, клієнт автоматично перенаправляє повідомлення на інший сервер.</span></p><p style="background-color:#ffffff;padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#2a2f35;font-weight:700">Клієнт:</span><span style="color:#2a2f35;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"> Клієнт є одним із вузлів у розподіленому кластері додатків. Це допоможе вам отримати доступ до інформації з сервера. Кожен клієнт регулярно відправляє на сервер повідомлення, що допомагає серверу дізнатися, що клієнт живий.</span></p><p style="background-color:#ffffff;padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#2a2f35;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Лідер: один із серверів позначений як Лідер. Він надає всю інформацію клієнтам, а також підтвердження того, що сервер живий. Він виконає автоматичне відновлення, якщо якийсь із підключених вузлів вийде з ладу.</span></p><p style="background-color:#ffffff;padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#2a2f35;font-weight:700">Фолловер:</span><span style="color:#2a2f35;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"> Серверний вузол, який слідує інструкції лідера, називається фолловером.</span></p><ul class="lst-kix_list_3-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">Клієнтські запити читання обробляються відповідним чином підключеним сервером Zookeeper.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">Клієнт пише запити, що обробляються лідером Zookeeper.</span></li></ul><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;background-color:#ffffff;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#2a2f35;font-weight:700">Ансамбль/Кластер</span><span style="color:#2a2f35;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">: група серверів Zookeeper, яка називається ансамблем або кластером. Ви можете використовувати інфраструктуру ZooKeeper у режимі кластера, щоб система працювала з оптимальним значенням під час роботи Apache.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Модель даних</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">ZooKeeper підтримує ієрархічне дерево вузлів, які називаються z-вузлами. У z-вузлах зберігаються дані і з ними зв&#39;язуються списки ACL (Access Control List). Система ZooKeeper була спроектована для координації (для якої зазвичай використовуються малі файли даних), а не зберігання великих обсягів інформації, тому обсяг даних, що зберігаються в будь-якому z-вузлі, не може перевищувати 1 Мбайт. Звернення до даних мають властивість атомарності. Клієнт, який читає дані, що зберігаються у вузлі, ніколи не отримує частину даних; або всі дані доставляють повністю, або операція читання завершується невдачею. Аналогічно операція запису замінює всі дані, пов&#39;язані з z-вузлом. ZooKeeper гарантує, що запис або буде завершено успішно, або станеться невдача; частковий запис, коли зберігається лише частина даних, записаних клієнтом, неможлива. ZooKeeper не підтримує операцію приєднання даних. Ці характеристики відрізняють ZooKeeper від системи HDFS, яка спроектована для зберігання великих обсягів даних з потоковим доступом і підтримкою приєднання. Для посилання на z-вузли використовуються шляхи, які в ZooKeeper представлені рядками символів кодування Юнікод, розділеними символом / (як і шляхи файлових систем Unix). Шляхи мають бути абсолютними, тому вони завжди починаються із символу /. Крім того, шляхи канонічні, тобто кожен шлях має єдину виставу. розділеними символом / (як і шляхи файлових систем Unix). Шляхи мають бути абсолютними, тому вони завжди починаються із символу /. Крім того, шляхи канонічні, тобто кожен шлях має єдину виставу. розділеними символом / (як і шляхи файлових систем Unix). Шляхи мають бути абсолютними, тому вони завжди починаються із символу /. Крім того, шляхи канонічні, тобто кожен шлях має єдину виставу.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Модель даних Zookeeper (ZDM)</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:11.6pt;line-height:1.0;background-color:#ffffff;font-family:&quot;Calibri&quot;;orphans:2;widows:2;text-align:center;padding-right:0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 366.80px; height: 379.07px;"><img alt="https://coderlessons.com/wp-content/uploads/images/gur/e716887aa22bfd90ff109c18c55f8531.png" src="https://lh6.googleusercontent.com/Hu4X4SI9tAEDcI1xLP6RBE_BlT9qvz3F6zXQAvLRUUC3WGKt4lqEc5oQWFsX2DRCoV40WB2FxSh_Oc4DaIOqgzOgiWI1kkETmz58F8DSQtKWnkphBZ0H2Y-8Vv6dtkWA9RumQZRFf7mbmnKnJfRUcA=s800" style="width: 366.80px; height: 379.07px; margin-left: -0.00px; margin-top: -0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><ul class="lst-kix_list_4-0 start" style="padding:0;margin:0"><li style="padding:0;list-style-position:inside;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:36pt;text-indent:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">Модель даних zookeeper слідує простору імен Hierarchal, де кожен вузол називається ZNode. Вузол – це система, де працює кластер.</span></li><li style="padding:0;list-style-position:inside;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:36pt;text-indent:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">Кожен ZNode має дані. Може мати чи не мати дітей</span></li><li style="padding:0;list-style-position:inside;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:36pt;text-indent:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">Шляхи ZNode:</span></li></ul><ul class="lst-kix_list_4-1 start" style="padding:0;margin:0"><li style="padding:0;list-style-position:inside;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:72pt;text-indent:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">Канонічний, розділений слешами та абсолютний</span></li><li style="padding:0;list-style-position:inside;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:72pt;text-indent:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">Не використовуйте відносні посилання</span></li><li style="padding:0;list-style-position:inside;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:72pt;text-indent:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">Імена можуть мати символи Unicode</span></li></ul><ul class="lst-kix_list_4-0" style="padding:0;margin:0"><li style="padding:0;list-style-position:inside;color:#000000;font-size:11pt;line-height:1.5;margin-right:0;background-color:#ffffff;margin-left:36pt;text-indent:36pt;font-family:&quot;Calibri&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;color:#000000;font-weight:400">ZNode підтримує структуру статистики та номер версії для зміни даних.</span></li></ul><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;background-color:#ffffff;text-indent:36pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;text-align:justify"><span style="color:#2a2f35;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Типи вузлів Zookeeper</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;background-color:#ffffff;text-indent:36pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Тип z-вузла задається в момент створення і не може змінюватись пізніше.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:36pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Існує три типи Znodes:</span></p><p style="padding:0;margin:0;color:#000000;text-indent:36pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Постійність znode</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">: цей тип znode активний навіть після того, як клієнт, який створив цей конкретний znode, було вимкнено. За замовчуванням у zookeeper всі вузли є постійними, якщо він не вказаний.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Ефемерний znode:</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"> Ефемерний z-вузол видаляється ZooKeeper після завершення сеансу клієнта, який створив цей вузол. Разом з тим, постійний z-вузол не прив&#39;язується до сеансу клієнта і видаляється тільки за явним розпорядженням клієнта (не обов&#39;язково того, який його створив). Ефемерний z-вузол не може мати нащадків, навіть ефемерних. І хоча ефемерні вузли пов&#39;язані з сеансом конкретного клієнта, вони помітні всім клієнтам (звичайно, залежно від своєї політики ACL).</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Ефемерні вузли ідеально підходять для побудови додатків, які потребують інформації про доступність деяких розподілених ресурсів.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:36pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Послідовний вузол</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">: Послідовний вузол може бути ефемерним, або постійним. Таким чином, коли новий znode створюється як послідовний znode. Ви можете призначити шлях znode, прикріпивши 10-значний номер до вихідного імені.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Послідовним </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">z-вузлам ZooKeeper надає порядковий номер, який стає частиною їхнього імені. Якщо z-вузл створюється з установкою прапора послідовного вузла, то до імені приєднується значення монотонно зростаючого лічильника (який ведеться батьківським z-вузлом).</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Послідовні числа можуть бути використані для глобального впорядкування подій у розподілених системах або для введення впорядкування клієнтом.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Сторожа </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">ZDM watch</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Сторожа дозволяють клієнтам отримувати сповіщення про зміни z-вузлів. Вони встановлюються операціями сервісу ZooKeeper і спрацьовують під час інших операцій цього сервісу. Наприклад, клієнт може викликати для z-вузла операцію exists, одночасно встановивши сторожа. Якщо z-сайт не існує, операція exists поверне false. Якщо пізніше z-вузл буде створено іншим клієнтом, сторож спрацює, сповістивши першого клієнта про створення z-вузла.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Сторожа спрацьовують лише один раз. Щоб отримати повторне сповіщення, клієнт перереєструє сторожа. Якщо клієнт із попереднього прикладу захоче отримувати наступні сповіщення про існування z-вузла (наприклад, про його видалення), він повинен знову викликати операцію exists для встановлення нового сторожа.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">1 Прийнято (хоч і не обов&#39;язково) завершувати імена послідовних вузлів дефісом, щоб спростити їх читання та розбір у додатках.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">2 Окрім зворотних викликів подій підключення, які не потребують перереєстрації.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Операції</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">ZooKeeper підтримує дев&#39;ять основних операцій, перерахованих у таблиці.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Таблиця -Операції ZooKeeper</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><a id="t.1b4f3c27fe15ccbecbb91795febe424e82ed4fcd"></a><a id="t.0"></a><table style="margin-left:-5.8pt;border-spacing:0;border-collapse:collapse;margin-right:auto"><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:104.7pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:center"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Операція</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:373.9pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:center"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Опис</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:104.7pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">create</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:373.9pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Створює z-вузол (батьківський z-вузол вже має існувати)</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:104.7pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">delete</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:373.9pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Видаляє z-вузол (який не повинен мати дочірніх z-вузлів)</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:104.7pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">exists</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:373.9pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Перевіряє існування z-вузла та отримує його метадані</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:104.7pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">getACL, setACL</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:373.9pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Отримує/задає список ACL для z-вузла</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:104.7pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">getChildren</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:373.9pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Отримує список дочірніх вузлів z-вузла</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:104.7pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">getData, setData</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:373.9pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Отримує/задає дані, пов&#39;язані з z-вузлом</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:104.7pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">sync</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:0pt 5.8pt 0pt 5.8pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:373.9pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Синхронізує клієнтську виставу z-вузла з ZooKeeper</span></p></td></tr></table><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Виконання операцій оновлення ZooKeeper залежить від перевірки умови. Операція delete або setData повинна задати номер версії z-вузла, що оновлюється (який визначається за попереднім викликом exists). Якщо номер версії не співпадає, оновлення завершується невдачею. Оновлення є неблокуючими операціями, тому клієнт, який втратив оновлення (через інший процес встиг оновити z-вузол), може вибрати між повторною спробою та виконанням іншої дії, причому зробити це без блокування інших процесів.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Хоча ZooKeeper може розглядатися як файлова система, деякі примітиви файлових систем були опущені задля простоти. Так як файли мають невеликий розмір, а їх вміст читається та записується повністю, в операціях відкриття, закриття та пошуку немає потреби.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Як згадувалося раніше, запис у ZooKeeper виконується атомарно, і успішний запис буде гарантовано збережено у постійному сховищі на більшості серверів ZooKeeper. Однак, операція читання може відставати від актуального стану сервісу ZooKeeper; Операція sync дозволяє клієнту оновити свою інформацію до нового стану.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Реалізація</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">ZooKeeper може працювати у двох режимах.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Автономний режим</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">, В якому працює єдиний сервер ZooKeeper, зручний для тестування через свою простоту (він навіть може вбудовуватися в модульні тести), але не забезпечує високої доступності або захисту від збоїв. У процесі реальної експлуатації ZooKeeper працює в </span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">реплікованому режимі</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">у кластері, який називається </span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">ансамблем</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">. ZooKeeper забезпечує високу доступність через реплікацію та може обслуговувати клієнтів за умови працездатності більшості машин в ансамблі. Наприклад, в ансамблі з 5 вузлів будь-які дві машини можуть відмовити, а сервіс продовжить працювати, тому що більшість (три машини) залишаються працездатними.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Врахуйте, що ансамбль з 6 вузлів переживе збій тільки двох машин, тому що при трьох відмови залишилися три машини не складають більшість. Тому в ансамбль зазвичай включається непарна кількість машин.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">На концептуальному рівні робота ZooKeeper дуже проста: системі потрібно лише стежити, щоб кожна зміна дерева z-вузлів реплікувалася більшості машин ансамблю. Якщо збої відбудуться менш ніж на половині машин, то щонайменше одна машина збереже останній стан. Інші репліки, що залишилися, з часом синхронізуються по ній.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Проте реалізована ця проста ідея нетривіально. ZooKeeper використовує протокол Zab, що працює у дві фази, які можуть повторюватися невизначену кількість разів:</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Фаза 1: вибір ведучого</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Машини, що входять до ансамблю, проходять процес вибору привілейованого учасника, що називається </span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">провідним</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">. Інші машини називаються </span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">відомими</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">. Ця фаза завершується після того, як більшість (або кворум) ведених синхронізує свій стан із ведучим.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Фаза 2: Атомарне розсилання</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Всі запити запису передаються ведучому, який надсилає оновлення серед відомих. Коли більшість збереже зміни, ведучий закріплює оновлення, а клієнт отримує підтвердження успішного оновлення. Протокол досягнення консенсусу має атомарність, тому зміна завершується або успіхом, або невдачею. У цілому нині процес нагадує процес двофазного закріплення.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Якщо на ведучому відбувається збій, решта машин знову проводить вибори ведучого і продовжує працювати, як раніше, з новим ведучим. Якщо старий ведучий пізніше відновить працездатність, він починає працювати як ведений. Вибори ведучого проходять дуже швидко - близько 200 мс по одному з опублікованих результатів1, і продуктивність від них не страждає.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Всі ансамбльні машини записують оновлення на диск перед тим, як оновлювати свою копію дерева z-вузлів, що знаходиться в пам&#39;яті. Запити читання можуть обслуговуватись будь-якою машиною; оскільки вони вимагають лише пошуку по ключу у пам&#39;яті, такі запити обслуговуються дуже швидко.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Узгодженість даних</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Розуміння основ реалізації ZooKeeper допомагає зрозуміти гарантії узгодженості даних, що надаються цим сервером. Терміни «ведучий» та «відомий» для машин ансамблю вибрано досить вдало: вони дають зрозуміти, що ведений може відставати від ведучого на кількох оновленнях. Це випливає з того факту, що збереження перед закріпленням має бути збережене на більшості машин, а не на всіх ансамблях. Уявіть клієнтів, підключених до серверів ZooKeeper. Клієнт може бути підключеним до провідного, але він не може свідомо керувати цим, і навіть не знає про цей факт.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Кожному оновленню, що вноситься в дерево z-вузлів, надається глобально-унікальний ідентифікатор, званий</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">zxid</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">(ZooKeeper transaction ID). Оновлення впорядковано, тому якщо zxid z1 менший за z2, то оновлення z1 відбулося до z2 — на думку ZooKeeper, єдиного авторитетного джерела, що визначає порядок подій у розподіленій системі.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">З архітектури ZooKeeper випливає низка гарантій узгодженості даних:</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Збереження послідовності </span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Оновлення від будь-якого конкретного клієнта застосовуються в порядку їхнього відправлення. Таким чином, якщо клієнт оновлює z-сайт</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">z</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">значеннямa, а 1.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">2 ZooKeeper можна налаштувати так, щоб ведучий не приймав клієнтські підключення – у цьому випадку його єдиною функцією стає координація оновлень. Для цього задайте властивості leaderServes значення no. Цей режим рекомендується для ансамблів, що містять більше трьох серверів.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Сервіснаступної операції він оновлює його вузол значеннямb, то жоден клієнт вже не побачить</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">z</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">зі значеннямaпісля того, як він побачив його зі значеннямb(якщо до</span><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">z</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">не застосовуються інші оновлення).</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:center"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic"></span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Атомарність</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Оновлення або проходять цілком успішно, або взагалі не проходять. Якщо спроба оновлення завершилася невдачею, жоден клієнт її не побачить.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Єдиний образ системи</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Клієнт бачить одне уявлення системи незалежно від цього, якого серверу він підключився. Якщо клієнт підключається до нового сервера під час того самого сеансу, він побачить старіший стан системи проти попереднім сервером. Якщо на сервері відбувається збій і клієнт намагається підключитися до іншого сервера в ансамблі, то сервер, що відстає від збійного, не прийматиме підключення від клієнтів, поки не наздожене його.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Стійкість</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Успішне оновлення зберігається, і воно вже не буде скасовано. Це означає, що оновлення переживають збої серверів.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:italic;font-weight:400">Своєчасність</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Відставання у сприйнятті системи будь-яким клієнтом обмежене і не перевищує кількох десятків секунд. Замість того, щоб надавати клієнту дуже застарілі дані, сервер перериває роботу, змушуючи клієнта підключитися до сервера з більш актуальною інформацією.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">З міркувань швидкодії запити читання обслуговуються з пам&#39;яті сервера ZooKeeper і беруть участь у глобальному упорядкуванні операцій записи. Ця властивість може призвести до видимої непослідовності станів ZooKeeper для клієнтів, які взаємодіють із зовнішніми механізмами.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Сеанси</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Під час налаштування клієнта ZooKeeper вказується список серверів ансамблю. Під час запуску клієнт намагається підключитися до одного із серверів зі списку. Якщо спроба підключення завершується невдачею, клієнт випробуває інший сервер зі списку тощо — або йому вдається успішно підключитися до одного з них, або відбувається збій, якщо всі сервери ZooKeeper недоступні.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Після підключення клієнта до сервера ZooKeeper сервер створює новий сеанс для клієнта. У сеансу є період тайм-ауту, який визначається додатком, що створив його. Якщо сервер не отримує запит протягом періоду тайм-ауту, він може перервати сеанс. Такий сеанс не можна відкрити повторно, проте пов&#39;язані з ним ефемерні вузли будуть втрачені. Хоча переривання сеансів за тайм-аутом є відносно рідкісною подією, так як сеанси мають великий термін життя, додаток повинен обробляти цю ситуацію.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Щоб уникнути переривання сеансу, клієнт надсилає періодичні запити у разі, якщо простий у сеансі перевищить певний проміжок часу.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">(Клієнтська бібліотека ZooKeeper робить це автоматично, вам не потрібно турбуватися про підтримку сеансу в коді). Проміжок вибирається досить низьким, щоб клієнт міг виявити збій сервера (проявляється в тайм-ауті читання) і підключитися до іншого сервера в межах періоду сеансу тайм-ауту.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Перехід на інший сервер ZooKeeper здійснюється клієнтом ZooKeeper автоматично.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Дуже важливо, що сеанси (і пов&#39;язані з ними ефемерні вузли) залишаються дійсними після того, як збійний сервер буде замінено іншим.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:400">Під час подолання збою додаток отримуватиме сповіщення про відключення та підключення. Оповіщення сторожів не доставляються, поки клієнт вимкнено, але буде доставлено за умови успішного повторного підключення. Якщо програма спробує виконати операцію під час підключення клієнта до іншого сервера, спроба завершиться невдачею. Це вкотре наголошує на важливості обробки винятків втрати з&#39;єднання в реальних додатках ZooKeeper.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="font-size:14pt;font-family:&quot;Times New Roman&quot;;font-weight:700">Час</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">У ZooKeeper існує кілька часових параметрів. Такт (tick) – фундаментальна одиниця часу в ZooKeeper, використовувана серверами ансамблю визначення розкладу їх взаємодій. Інші часові параметри визначаються за тривалістю такту (або принаймні обмежуються нею). Наприклад, тайм-аут сеансу не може бути меншим за два такти або більше 20.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Якщо ви спробуєте задати неприпустиму тривалість тайм-ауту сеансу, вона буде автоматично приведена до цих меж.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Стандартна тривалість такту становить 2 секунди (2000 мілісекунд).</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Таким чином, дозволений тайм-аут сеансу лежить у межах від 4 до 40 секунд. При виборі тайм-ауту сеансу слід враховувати низку чинників. Найнижче значення тайм-ауту прискорює виявлення збоїв. У розглянутому раніше прикладі із приналежністю до групи тайм-аут сеансу визначає час виключення із групи непрацездатної машини. Проте занадто низька величина тайм-ауту теж небажана, тому що в завантаженій мережі пакети можуть доставлятися із затримкою, яка призведе до ненавмисного переривання сеансів.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">У додатках, що створюють складніші ефемерні стани, краще використовувати більшу тривалість тайм-ауту через вищі витрати ресурсів на відновлення. Іноді програму вдається спроектувати таким чином, що вона може перезапуститися під час тайм-ауту та уникнути переривання сеансу. Кожному сеансу сервер призначає унікальний ідентифікатор та пароль; якщо передати ці дані ZooKeeper під час підключення, сеанс може бути відновлено (за умови, що його термін дії не минув). Таким чином, програма може забезпечити коректне завершення: ідентифікатор та пароль сеансу зберігаються перед перезапуском процесу, а потім завантажуються у перезапущеному процесі з поновленням сеансу.</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Цю функцію слід розглядати як оптимізацію, що запобігає перериванню сеансів. Вона не позбавляє необхідності обробки переривання сеансу, яке може статися при несподіваному збої машини або навіть у тому випадку, якщо програма завершилася коректно, але не перезапустилася до закінчення терміну дії сеансу (незалежно від причини).</span></p><p style="padding:0;margin:0;color:#000000;text-indent:35.5pt;font-size:11pt;font-family:&quot;Calibri&quot;;line-height:1.5;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal">Як правило, чим більший ансамбль ZooKeeper, тим більше має бути тайм-аут сеансу. Тайм-аути підключення, тайм-аути читання та частота періодичних сигналів - всі ці параметри визначаються у внутрішній реалізації як функція кількості серверів в ансамблі, тому зі зростанням ансамблю ці інтервали зменшуються. Якщо ви стикаєтеся з частими втратами підключень, розгляньте можливість збільшення тайм-ауту.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;line-height:1.5;text-indent:35.5pt;font-family:&quot;Calibri&quot;;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Times New Roman&quot;;font-style:normal"></span></p></div></div></div></div><script nonce="gYHwHLpMVb3q0zs2lK62gQ">window.setTimeout(function() { window.scrollTo(0, 1); }, 0)</script></body></html>